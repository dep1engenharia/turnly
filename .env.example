## -----------------------------------------------
## Turnly environment file
## -----------------------------------------------

##
## Application configuration
##

# Environment - (Options: development, production, test)
NODE_ENV=development

# Base URL of your Turnly Apps - (Options: turnly.local, turnly.com, turnly.app, etc.)
APP_DOMAIN=turnly.local

# A subdomain of your main domain to access your infrastructure UIs. - (Options: infra.turnly.local, infra.turnly.com, etc.)
APP_INFRA_DOMAIN=infra.turnly.local

# The exposed port for each application - (Options: 6000, 7000, 8000, etc.)
APP_PORT=6000

# The gRPC bind address for each application - (Options: 0.0.0.0:6000, 0.0.0.0:50501, etc.)
RPC_BIND_ADDRESS="0.0.0.0:6000"

# The prefix for the unauthenticated app's routes - (Options: /anonymous, /public, etc.)
PREFIX_UNAUTHENTICATED_ROUTES=/anonymous

##
## Observability configuration
##

# The level of logging to use - (Options: verbose, debug, info, warn, error)
LOGGING_LEVEL=verbose

# Sentry DSN for error reporting - (Options: https://<YOUR_SENTRY_DSN>)
SENTRY_DSN=

# Fluentd Config - NOTE: This domain is not the same as your APP_DOMAIN, this is an internal alias when using your Self-hosted infrastructure.
FLUENT_HOST=logging.turnly.local
FLUENT_PORT=24224

# Tracing config - NOTE: This domain is not the same as your APP_DOMAIN, this is an internal alias when using your Self-hosted infrastructure.
TRACING_ENDPOINT=http://tracing.turnly.local:14268/api/traces

##
## IAM configuration
##

# A subdomain of your main domain to access your IAM UIs. - (Options: accounts.turnly.local, accounts.turnly.com, etc.)
IAM_HOSTNAME=accounts.turnly.local

# Database connection params for IAM - Currently only tested with Postgres
IAM_DB_HOST=postgres.turnly.local
IAM_DB_PORT=5432
IAM_DB_DATABASE=iam
IAM_DB_SCHEMA=public

# Database credentials for IAM - Currently only tested with Postgres
IAM_DB_USERNAME=turnly
IAM_DB_PASSWORD=turnly

# WARNING: these are the credentials for the IAM super-admin user.
IAM_ADMIN_USERNAME=admin
IAM_ADMIN_PASSWORD=admin

##
## OAuth middleware configuration
##

# Gateway Forwarding Auth - Encryption key used to encrypt the cookie (32 bytes)
OAUTH_ENCRYPTION_KEY=e5659373957778734945638459467936

# Gateway Forwarding Auth - Secret used for signing the cookie (32 bytes)
OAUTH_SIGNING_KEY=ef80ac8d-1e79-4d50-ac7d-1e3f055ea226

# Gateway Forwarding Auth - OIDC Provider URI
OAUTH_OIDC_PROVIDER_URI=http://accounts.turnly.local/realms/turnly

# Gateway Forwarding Auth - Client ID
OAUTH_OIDC_CLIENT_ID=turnly-oauth-client

# Gateway Forwarding Auth - Client Secret
OAUTH_OIDC_CLIENT_SECRET=aNhftIJRGrEwG91tTwD5IBavxRMu5yro

# Gateway Forwarding Auth - Redirect URIs
OAUTH_REDIRECT_URI_ONE=/oauth/*
OAUTH_REDIRECT_URI_TWO=http://turnly.local/*

##
## Admin OAuth middleware configuration
##

# Admin Forwarding Auth - OIDC Provider URI
OAUTH_ADMIN_OIDC_PROVIDER_URI=http://accounts.turnly.local/realms/engineering

# Admin Forwarding Auth - Client ID
OAUTH_ADMIN_OIDC_CLIENT_ID=engineering-oauth-client

# Admin Forwarding Auth - Client Secret
OAUTH_ADMIN_OIDC_CLIENT_SECRET=kJjTlPTv2LKLKjqyRFFT4kYDbOj33coj

# Admin Forwarding Auth - Secret used for signing the cookie (32 bytes)
OAUTH_ADMIN_SIGNING_KEY=288df094f7fce8ad5340409becf44d22

# Admin Forwarding Auth - Encryption key used to encrypt the cookie (32 bytes)
OAUTH_ADMIN_ENCRYPTION_KEY=fe853516eed48e6222c922b6473ffcee

# Admin Forwarding Auth - Redirect URIs
OAUTH_ADMIN_REDIRECT_URI_ONE=/oauth-admin/*
OAUTH_ADMIN_REDIRECT_URI_TWO=http://infra.turnly.local/*

##
## Infrastructure - For app connections
##

# Mongo URI - (Options: mongodb://<USERNAME>:<PASSWORD>@<HOST>:<PORT>)
MONGO_URI=mongodb://root:turnly@mongo.turnly.local:27017

# Redis config - NOTE: This domain is not the same as your APP_DOMAIN, this is an internal alias when using your Self-hosted infrastructure.
REDIS_HOST=redis.turnly.local
REDIS_PORT=6379
REDIS_PASSWORD=

# Storage config - NOTE: This domain is not the same as your APP_DOMAIN, this is an internal alias when using your Self-hosted infrastructure.
STORAGE_HOST=http://storage.turnly.local:9000

# Elastic Search config - NOTE: This domain is not the same as your APP_DOMAIN, this is an internal alias when using your Self-hosted infrastructure.
ELASTICSEARCH_URI=http://elasticsearch.turnly.local:9200

# Broker config - (Options: amqp://<USERNAME>:<PASSWORD>@<HOST>:<PORT>)
RABBITMQ_URI=amqp://guest:guest@rabbitmq.turnly.local:5672
RABBITMQ_EXCHANGE=turnly.ms.events.exchange

# Twilio config - Use to send notifications via SMS, voice, etc.
TWILIO_ACCOUNT_SID="__TWILIO_ACCOUNT_SID_HERE__"
TWILIO_AUTH_TOKEN="__TWILIO_AUTH_TOKEN_HERE__"
TWILIO_PHONE_NUMBER="__TWILIO_PHONE_NUMBER_HERE__"

##
## Infrastructure - Self-hosted
##
## NOTE: These are only required if you are self-hosting the infrastructure.
##
## WARNING: If you will not be using a self-hosted service, you will need to update
## the docker-compose files and remove that service and the depends_on of the others.
##

# Mongo config
MONGO_USERNAME=root
MONGO_PASSWORD=turnly

# MinIO - Use as a storage provider like S3
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=minio123

# Postgres config
POSTGRES_PASSWORD=turnly
POSTGRES_USER=turnly
POSTGRES_DB=iam

# Mongo Dashboard Port
MONGO_UI_PORT=6020

# Postgres Adminer Port
POSTGRES_ADMINER_PORT=6030

# Elastic Search Dashboard Port
ELASTICSEARCH_UI_PORT=6040

# Redis Adminer config
REDIS_UI_PORT=6050

# Minio UI Port
MINIO_UI_PORT=6060

# Broker UI Port
RABBITMQ_UI_PORT=6070

# Tracing UI Port
TRACING_UI_PORT=6080

##
## Docker configuration
##

# The name of the image stage to use for building apps. (Options: development, production)
DOCKER_BUILD_STAGE=development

# Location where the apps will be cloned, relative to the root directory.
APPS_DIRECTORY=./apps

# Base directory for the docker containers relative to the ./devo/provisioning directory root.
# NOTE: This is the same as the APPS_DIRECTORY, but with the leading ../../
DOCKER_RELATIVE_APPS_DIR=../../apps

##
## Development configuration
##
## NOTE: These are only required if you are running in development mode.
##

# DB Debugging - DO NOT USE IN PRODUCTION
DB_DEBUG=true

# The gateway address for external access in development mode (e.g. turnly.local) - Optional
RPC_CONSUMER_ADDRESS=

# Proxy dashboard port
TRAEFIK_UI_PORT=6010
